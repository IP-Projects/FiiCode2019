!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@multimedia-album-management/extras/pdf-module"),require("@multimedia-album-management/extras/svg-module"),require("@multimedia-album-management/extras/youtube-module"),require("@angular/forms"),require("@angular/common/http"),require("hammerjs"),require("@angular/router"),require("ngx-speech"),require("rxjs"),require("jquery"),require("pdfjs-dist"),require("rxjs/operators"),require("@angular/core"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("ngx-multi-media-album-management",["exports","@angular/common","@multimedia-album-management/extras/pdf-module","@multimedia-album-management/extras/svg-module","@multimedia-album-management/extras/youtube-module","@angular/forms","@angular/common/http","hammerjs","@angular/router","ngx-speech","rxjs","jquery","pdfjs-dist","rxjs/operators","@angular/core","@angular/platform-browser"],t):t(e["ngx-multi-media-album-management"]={},e.ng.common,e.pdfModule,e.svgModule,e.youtubeModule,e.ng.forms,e.ng.common.http,e.Hammer,e.ng.router,e.ngxSpeech,e.rxjs,e.$_,e.pdfjsLib,e.rxjs.operators,e.ng.core,e.ng.platformBrowser)}(this,function(e,t,n,o,i,s,l,r,a,d,c,u,h,p,f,g){"use strict";var y=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:f.Component,args:[{selector:"app-ngx-MultiMediaAlbumManagement",template:"\n    <router-outlet></router-outlet>\n  "}]}],e.ctorParameters=function(){return[]},e}();function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,s=n.call(e),l=[];try{for(;(void 0===t||0<t--)&&!(o=s.next()).done;)l.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=s["return"])&&n.call(s)}finally{if(i)throw i.error}}return l}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}var v=function(){function e(e){this.http=e}return e.prototype.getData=function(e){return this.http.get(e)},e.prototype.postData=function(e,t){return this.http.post(e,t)},e.prototype.putData=function(e,t){return this.http.put(e,t)},e.prototype.deleteData=function(e){return this.http["delete"](e)},e.decorators=[{type:f.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:l.HttpClient}]},e.ngInjectableDef=f.defineInjectable({factory:function(){return new e(f.inject(l.HttpClient))},token:e,providedIn:"root"}),e}(),w=function(){function e(){}return e.prototype.snake=function(){var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame,i=window.cancelAnimationFrame;function e(e,t){return Math.floor(Math.random()*(t-e+1))+e}function s(){return(new Date).getTime()}var l=20,n=40,a=1e3/15,r={LEFT:0,UP:1,RIGHT:2,DOWN:3};function t(){this.parts=[],this.homeWidth=n,this.homeHeight=l,this.direction=r.RIGHT,this.stunned=!1,this.frameId=0,this.lastDirectionChangeFrameId=0;var e=this.homeHeight/2,t=this.homeWidth/2;d(this,e,2+t),d(this,e,1+t),d(this,e,t),d(this,e,t-1),d(this,e,t-2),function o(n){document.addEventListener("keydown",function(e){var t=n.direction;if(n.lastDirectionChangeFrameId<n.frameId)switch(e.keyCode){case 37:n.direction!==r.RIGHT&&(n.direction=r.LEFT);break;case 38:n.direction!==r.DOWN&&(n.direction=r.UP);break;case 39:n.direction!==r.LEFT&&(n.direction=r.RIGHT);break;case 40:n.direction!==r.UP&&(n.direction=r.DOWN)}t!==n.direction&&(n.lastDirectionChangeFrameId=n.frameId)})}(this)}function d(e,t,n){e.parts.push({y:t,x:n})}function c(){this.width=n,this.height=l,this.text="",this.oldSnakeTail={x:-1,y:-1},function i(e){var t,n="";for(e.text="",t=0;t<e.getWidth()+2;++t)n+="#";e.text+=n+"\n";var o="#";for(t=0;t<e.getWidth();++t)o+=" ";for(o+="#",t=0;t<e.getHeight();++t)e.text+=o+"\n";e.text+=n}(this)}function f(e,t,n){return(e.getWidth()+3)*(1*t+1)+1*n+1}function u(){this.frameId=0,this.score=0,this.status="Press SPACE to start",this.frameHeader="",this.running=!1,this.gameOver=!1,this.field=new c,this.snake=new t,this.apple=p(),h(this)}function p(){return{x:e(0,n-1),y:e(0,l-1)}}function h(e){var t="";t+="Game by Daniil Belyakov";for(var n=0;n<l;++n)t+="\n";t+="Score: "+e.getScore(),t+=" | "+e.getStatus(),e.frameHeader=t}t.prototype.blockDirectionChange=function(){this.lastDirectionChangeFrameId=this.frameId},t.prototype.updateFrameId=function(e){this.frameId=e},t.prototype.isStunned=function(){return this.stunned},t.prototype.eatApple=function(e){var t=this.getParts(),n=t[t.length-1];return!!function o(e,t){var n=e.getParts()[0];return n.x===t.x&&n.y===t.y}(this,e)&&(d(this,n.y,n.x),!0)},t.prototype.getParts=function(){return this.parts},t.prototype.getDirection=function(){return this.direction},t.prototype.move=function(){var e,t=this.getParts(),n=t[0];for(e=t.length-1;0<e;--e)t[e].x=t[e-1].x,t[e].y=t[e-1].y;switch(this.getDirection()){case r.LEFT:n.x=(n.x-1+this.homeWidth)%this.homeWidth;break;case r.UP:n.y=(n.y-1+this.homeHeight)%this.homeHeight;break;case r.RIGHT:n.x=(n.x+1+this.homeWidth)%this.homeWidth;break;case r.DOWN:n.y=(n.y+1+this.homeHeight)%this.homeHeight}for(e=1;e<t.length;++e)n.x===t[e].x&&n.y===t[e].y&&(this.stunned=!0)},t.prototype.draw=function(e){var t=e.getText(),n=this.getParts();if(e.oldSnakeTail.x<0){for(var o={},i=0;i<n.length;++i){var s=n[i];o[s.y]===undefined?o[s.y]=[s.x]:o[s.y].push(s.x)}for(var l=Object.keys(o),a=0;a<l.length;++a)for(var r=l[a],d=o[r],c=0;c<d.length;++c){var u=f(e,r,d[c]);t=t.substr(0,u)+"@"+t.substr(u+1)}}else{if(e.oldSnakeTail.x!==n[n.length-1].x||e.oldSnakeTail.y!==n[n.length-1].y){var p=f(e,e.oldSnakeTail.y,e.oldSnakeTail.x);t=t.substr(0,p)+" "+t.substr(p+1)}var h=f(e,n[0].y,n[0].x);t=t.substr(0,h)+"@"+t.substr(h+1)}e.oldSnakeTail.y=n[n.length-1].y,e.oldSnakeTail.x=n[n.length-1].x,e.text=t},c.prototype.getWidth=function(){return this.width},c.prototype.getHeight=function(){return this.height},c.prototype.getText=function(){return this.text},c.prototype.getFullText=function(e,t){e.draw(this);var n=this.text,o=f(this,t.y,t.x);return n=n.substr(0,o)+"$"+n.substr(o+1),this.text=n,this.text},u.prototype.incrementFrameId=function(){++this.frameId},u.prototype.getFrameId=function(){return this.frameId},u.prototype.getScore=function(){return this.score},u.prototype.setStatus=function(e){this.status=e,h(this)},u.prototype.getStatus=function(){return this.status},u.prototype.setRunning=function(e){this.running=e},u.prototype.isRunning=function(){return this.running},u.prototype.setOver=function(e){this.gameOver=e},u.prototype.isOver=function(){return this.gameOver},u.prototype.incrementScore=function(){++this.score,h(this)},u.prototype.getField=function(){return this.field},u.prototype.getSnake=function(){return this.snake},u.prototype.getApple=function(){return this.apple},u.prototype.dropApple=function(){this.apple=p()},u.prototype.draw=function(){!function o(e){var t=function n(e){return e.frameHeader}(e);console.log(t)}(this),function s(e){var t=e.getField(),n=e.getSnake(),o=e.getApple(),i=t.getFullText(n,o);console.log(i)}(this)};var g,y,m=new u,b=0;function v(){var e=m.getSnake(),t=m.getApple();if(y=s(),a<=y-g){if(e.move(),e.eatApple(t)&&(m.incrementScore(),m.dropApple()),e.isStunned())m.setStatus("Game Over! | Press ENTER to reset"),m.setRunning(!1),m.setOver(!0),m.draw(),w();else{m.draw(),m.incrementFrameId();var n=m.getFrameId();e.updateFrameId(n),n%200==0&&(console.clear(),m.draw())}g=s()}m.isRunning()?b=o(v):i(b)}function w(){i(b),m.setRunning(!1)}g=s(),m.draw(),document.addEventListener("keydown",function(e){switch(e.keyCode){case 13:m.isOver()&&(!function t(){m=new u,y=g=b=0}(),m.draw());break;case 32:if(!m.isOver())if(m.isRunning())m.getSnake().blockDirectionChange(),m.setStatus("Paused | Press SPACE to continue"),m.draw(),w();else!function n(){b=o(v),m.setStatus("Running | Press SPACE to pause"),m.setRunning(!0)}()}})},e.decorators=[{type:f.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=f.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),S=function(){function e(){}return e.prototype.makeFloatingMicrophone=function(e){var t=document.getElementById("floatingMicrophone"),n=!1,o=e,i=0,s=0,l=0,a=0;function r(e){n=!0,(e=e||window.event).preventDefault(),i=l-e.clientX,s=a-e.clientY,l=e.clientX,a=e.clientY,t.style.top=t.offsetTop-s+"px",t.style.left=t.offsetLeft-i+"px"}function d(){document.onmouseup=null,document.onmousemove=null,0==n&&function e(){t.classList.contains("notRecording")?(t.classList.remove("notRecording"),t.classList.add("recording"),o.start()):(t.classList.remove("recording"),t.classList.add("notRecording"),o.stop())}()}t.style.top=window.innerHeight-75+"px",t.style.left=window.innerWidth-75+"px",t&&(t.onmousedown=function c(e){n=!1,(e=e||window.event).preventDefault(),l=e.clientX,a=e.clientY,document.onmouseup=d,document.onmousemove=r}),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&this.touchInputsListeners()},e.prototype.touchInputsListeners=function(){var o=document.getElementById("floatingMicrophone"),e=new r(o);e.add(new r.Pan({direction:r.DIRECTION_ALL,threshold:0})),e.on("pan",function a(e){l||(l=!0,i=o.offsetLeft,s=o.offsetTop);var t=e.deltaX+i,n=e.deltaY+s;o.style.left=t+"px",o.style.top=n+"px",e.isFinal&&(l=!1)});var i=0,s=0,l=!1},e.decorators=[{type:f.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=f.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),x=function(){function e(e,t,n,o,i,s){this.api=e,this.formBuilder=t,this.speech=n,this.snake=o,this.router=i,this.floatingMicrophone=s,this._loadedFirstTime=!1,this._noMoreData=!1,this._modalDeleteConfirmation="",this._destroyed=new c.Subject}return e.prototype.ngOnInit=function(){this._addNewCollectionForm=this.formBuilder.group({collectionName:["",s.Validators.required],collectionType:["",s.Validators.required],keywords:["",s.Validators.required]}),this.loadInputOptionsOrDefault(),this.speechActions(),this.floatingMicrophone.makeFloatingMicrophone(this.speech)},e.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete()},e.prototype.speechActions=function(){var t=this;this.speech.message.pipe(p.catchError(function(e){return t.toggleMic(),c.EMPTY}),p.takeUntil(this._destroyed)).subscribe(function(e){console.log(e),"delete"==e.message&&document.getElementById("deleteCollectionButton").click(),"add"==e.message&&document.getElementById("addCollectionButton").click(),"suggestions"!=e.message&&"tip"!=e.message&&"recommendations"!=e.message||document.getElementById("suggestionsCollectionButton").click(),"snake"==e.message&&t.snake.snake(),t.toggleMic()})},e.prototype.toggleMic=function(){var e=document.getElementById("floatingMicrophone");e.classList.contains("notRecording")?(e.classList.remove("notRecording"),e.classList.add("recording"),this.speech.start()):(e.classList.remove("recording"),e.classList.add("notRecording"),this.speech.stop())},e.prototype.getCollections=function(){var n=this;this.api.getData(this.collectionUrl.replace("/$userId","/"+this.userId).replace("/$take","/"+this.take).replace("/$skip","/"+this.skip)).pipe(p.take(1)).subscribe(function(e){if("undefined"==typeof n._collectionData&&(n._collectionData=[]),e.collection.forEach(function(e){console.log(e),console.log(e.placeholder.length),0==e.placeholder.length&&(e.placeholder=[{data:"../../../assets/new-collection.jpg"}])}),0!=e.collection.length){console.log(n._collectionData),n._collectionData=b(n._collectionData,e.collection),n.skip+=n.take;var t="";n._collectionData.forEach(function(e){t+=","+e.keywords}),n._mostUsedKeywords=n.mostUsedKeywords(t),console.log(typeof n.suggestedCollectionUrl),"undefined"!=typeof n.suggestedCollectionUrl&&(console.log(typeof n.suggestedCollectionUrl),n.getSuggestedCollections()),n._loadedFirstTime=!0}else n._noMoreData=!0})},e.prototype.mostUsedKeywords=function(e){for(var t={},n=e.split(","),o=0;o<n.length;o++)t["_"+n[o]]=(t["_"+n[o]]||0)+1;delete t._;var i="";for(var s in t=JSON.parse(JSON.stringify(t).replace(/_/g,"")))i+=","+s;return i=i.replace(",",""),console.log(i),i},e.prototype.getSuggestedCollections=function(){var t=this;this.api.getData(this.suggestedCollectionUrl.replace("/$userId","/"+this.userId).replace("/$take","/"+this.take).replace("/$skip","/0")+"/"+this._mostUsedKeywords).pipe(p.take(1)).subscribe(function(e){e.forEach(function(e){console.log(e),console.log(e.placeholder.length),0==e.placeholder.length&&(e.placeholder=[{data:"../../../assets/new-collection.jpg"}])}),t._suggestedCollectionData=e})},e.prototype.onWindowScroll=function(){var e=(document.documentElement.scrollTop||document.body.scrollTop)+document.documentElement.offsetHeight,t=document.documentElement.scrollHeight;if(console.log(e),console.log(t),"undefined"==typeof this._scrollAmount)this._scrollAmount=e;else{var n=document.getElementById("floatingMicrophone");n.style.top=parseFloat(n.style.top)+(e-this._scrollAmount)+"px",this._scrollAmount=e}e!=t&&Math.ceil(e)!=Math.ceil(t)&&Math.floor(e)!=Math.floor(t)&&Math.floor(e)!=Math.ceil(t)&&Math.ceil(e)!=Math.floor(t)||this._loadedFirstTime&&this.getCollections()},e.prototype.loadCollectionsUntilScrollbarAppears=function(){var e=this;this.getCollections();var t=document.documentElement.scrollHeight,n=setInterval(function(){1==e._loadedFirstTime&&(t<document.documentElement.scrollHeight||1==e._noMoreData?clearInterval(n):e.getCollections())},1e3)},e.prototype.toggleDeleteButton=function(){this._deleteAccent==this.bootstrapAccentPrimary?(this._deleteAccent=this.bootstrapAccentSecondary,this._modalDeleteConfirmation="#deleteConfirmationModal"):(this._deleteAccent=this.bootstrapAccentPrimary,this._modalDeleteConfirmation="")},e.prototype.accessOrDelete=function(e){this._deleteAccent==this.bootstrapAccentSecondary?(console.log(e),this._markedForDeletion=e):(console.log(e),this.router.navigate(["/"+e.id]))},e.prototype.accessRecommendedCollection=function(e){this.router.navigate(["/"+e.id])},e.prototype.deleteCollection=function(){var t=this;this.api.deleteData(this.deleteCollectionUrl.replace("/$collectionId","/"+this._markedForDeletion.id)).pipe(p.take(1)).subscribe(function(e){}),this._collectionData=this._collectionData.filter(function(e){return e!=t._markedForDeletion})},e.prototype.addCollection=function(){var t=this;console.log(this._addNewCollectionForm),this.api.postData(this.addCollectionUrl,{Name:""+this._addNewCollectionForm.value.collectionName,Type:this._addNewCollectionForm.value.collectionType,Keywords:""+this._addNewCollectionForm.value.keywords,UserId:""+this.userId}).pipe(p.take(1)).subscribe(function(e){console.log(e),e.placeholder=[{data:"../../../assets/new-collection.jpg"}],t._collectionData=b(t._collectionData,[e])})},e.prototype.loadInputOptionsOrDefault=function(){var t=this;"undefined"!=typeof this.configPath?this.api.getData(this.configPath).pipe(p.catchError(function(e){return t.loadDefault(),"undefined"!=typeof t.collectionUrl&&(t.loadCollectionsUntilScrollbarAppears(),t.onWindowScroll()),c.EMPTY}),p.take(1),p.map(function(e){return console.log("here"),e})).subscribe(function(e){"undefined"!=typeof e.userId&&"undefined"==typeof t.userId&&(t.userId=e.userId),"undefined"!=typeof e.gridSize&&"undefined"==typeof t.gridSize&&(t.gridSize=e.gridSize),"undefined"!=typeof e.gridSizeSuggestions&&"undefined"==typeof t.gridSizeSuggestions&&(t.gridSizeSuggestions=e.gridSizeSuggestions),"undefined"!=typeof e.collectionUrl&&"undefined"==typeof t.collectionUrl&&(t.collectionUrl=e.collectionUrl),"undefined"!=typeof e.suggestedCollectionUrl&&"undefined"==typeof t.suggestedCollectionUrl&&(t.suggestedCollectionUrl=e.suggestedCollectionUrl),"undefined"!=typeof e.deleteCollectionUrl&&"undefined"==typeof t.deleteCollectionUrl&&(t.deleteCollectionUrl=e.deleteCollectionUrl),"undefined"!=typeof e.addCollectionUrl&&"undefined"==typeof t.addCollectionUrl&&(t.addCollectionUrl=e.addCollectionUrl),"undefined"!=typeof e.skip&&"undefined"==typeof t.skip&&(t.skip=e.skip),"undefined"!=typeof e.take&&"undefined"==typeof t.take&&(t.take=e.take),"undefined"!=typeof e.bootstrapAccentPrimary&&"undefined"==typeof t.bootstrapAccentPrimary&&(t.bootstrapAccentPrimary=e.bootstrapAccentPrimary),"undefined"!=typeof e.bootstrapAccentSecondary&&"undefined"==typeof t.bootstrapAccentSecondary&&(t.bootstrapAccentSecondary=e.bootstrapAccentSecondary),"undefined"!=typeof e.albumUrl&&"undefined"==typeof t.albumUrl&&(t.albumUrl=e.albumUrl),"undefined"!=typeof e.suggestedEntityUrl&&"undefined"==typeof t.suggestedEntityUrl&&(t.suggestedEntityUrl=e.suggestedEntityUrl),"undefined"!=typeof e.deleteEntityUrl&&"undefined"==typeof t.deleteEntityUrl&&(t.deleteEntityUrl=e.deleteEntityUrl),"undefined"!=typeof e.addEntitiesUrl&&"undefined"==typeof t.addEntitiesUrl&&(t.addEntitiesUrl=e.addEntitiesUrl),"undefined"!=typeof e.getEntityUrl&&"undefined"==typeof t.getEntityUrl&&(t.getEntityUrl=e.getEntityUrl),"undefined"!=typeof e.slideShow&&"undefined"==typeof t.slideShow&&(t.slideShow=e.slideShow),"undefined"!=typeof e.lockSlideShow&&"undefined"==typeof t.lockSlideShow&&(t.lockSlideShow=e.lockSlideShow),"undefined"!=typeof e.slideShowTimeBeforeNext&&"undefined"==typeof t.slideShowTimeBeforeNext&&(t.slideShowTimeBeforeNext=e.slideShowTimeBeforeNext),t.loadDefault(),"undefined"!=typeof t.collectionUrl&&(t.loadCollectionsUntilScrollbarAppears(),t.onWindowScroll())}):(this.loadDefault(),"undefined"!=typeof this.collectionUrl&&(this.loadCollectionsUntilScrollbarAppears(),this.onWindowScroll()))},e.prototype.loadDefault=function(){"undefined"==typeof this.userId&&(this.userId="00000000-0000-0000-0000-000000000000"),"undefined"==typeof this.gridSize&&(this.gridSize=10),"undefined"==typeof this.gridSizeSuggestions&&(this.gridSizeSuggestions=3),"undefined"==typeof this.collectionUrl&&(this.collectionUrl=""),"undefined"==typeof this.suggestedCollectionUrl&&(this.suggestedCollectionUrl=""),"undefined"==typeof this.deleteCollectionUrl&&(this.deleteCollectionUrl=""),"undefined"==typeof this.addCollectionUrl&&(this.addCollectionUrl=""),"undefined"==typeof this.skip&&(this.skip=0),"undefined"==typeof this.take&&(this.take=10),"undefined"==typeof this.bootstrapAccentPrimary&&(this.bootstrapAccentPrimary="danger"),"undefined"==typeof this.bootstrapAccentSecondary&&(this.bootstrapAccentSecondary="dark"),"undefined"==typeof this.albumUrl&&(this.albumUrl=""),"undefined"==typeof this.suggestedEntityUrl&&(this.suggestedEntityUrl=""),"undefined"==typeof this.deleteEntityUrl&&(this.deleteEntityUrl=""),"undefined"==typeof this.addEntitiesUrl&&(this.addEntitiesUrl=""),"undefined"==typeof this.getEntityUrl&&(this.getEntityUrl=""),"undefined"==typeof this.slideShow&&(this.slideShow=!1),"undefined"==typeof this.lockSlideShow&&(this.lockSlideShow=!1),"undefined"==typeof this.slideShowTimeBeforeNext&&(this.slideShowTimeBeforeNext=5e3);var e={gridSize:this.gridSize,gridSizeSuggestions:this.gridSizeSuggestions,skip:this.skip,take:this.take,bootstrapAccentPrimary:this.bootstrapAccentPrimary,bootstrapAccentSecondary:this.bootstrapAccentSecondary,albumUrl:this.albumUrl,suggestedEntityUrl:this.suggestedEntityUrl,deleteEntityUrl:this.deleteEntityUrl,addEntitiesUrl:this.addEntitiesUrl,getEntityUrl:this.getEntityUrl,lockSlideShow:this.lockSlideShow,slideShow:this.slideShow,slideShowTimeBeforeNext:this.slideShowTimeBeforeNext};sessionStorage.setItem("albumInputs",JSON.stringify(e)),this._deleteAccent=this.bootstrapAccentPrimary},e.decorators=[{type:f.Component,args:[{selector:"app-collection-of-multimedia-albums",template:'<div id="collection-of-multimedia-albums" class="w-100 h-100 p-2 box roboto-font">\n  \x3c!--Button Area--\x3e\n  <div id="button-area" class="w-100 d-flex-block justify-content-between box">\n    <div class="w-resizable-35 d-flex justify-content-between-start">\n      <button\n        type="button"\n        id="addCollectionButton"\n        class="btn btn-{{ bootstrapAccentPrimary }} w-min-140px"\n        data-toggle="modal"\n        data-target="#addCollectionModal"\n      >\n        Add Collection\n      </button>\n      <button\n        type="button"\n        id="deleteCollectionButton"\n        class="btn btn-{{ _deleteAccent }} w-min-140px"\n        (click)="toggleDeleteButton()"\n      >\n        Delete Collection\n      </button>\n    </div>\n\n    <div class="w-resizable-20 d-flex justify-content-between-end box">\n      \x3c!-- Toggle Switch --\x3e\n      <div class="w-140px d-flex flex-nowrap">\n        <div class="w-60px ml-2 d-flex align-items-center box">\n          <label class="switch box">\n            <input type="checkbox" [(ngModel)]="_toggleView" />\n            <span class="slider round"></span>\n          </label>\n        </div>\n        <button\n          type="button"\n          id="suggestionsCollectionButton"\n          class="btn btn-{{ bootstrapAccentPrimary }} w-80px"\n          data-toggle="modal"\n          data-target="#seeSuggestionsModal"\n        >\n          Tip\n        </button>\n      </div>\n      \x3c!-- Filter Box --\x3e\n      <div class="w-min-140px w-max-140px box">\n        <input class="form-control" type="text" placeholder="Search.." [(ngModel)]="_searchText" />\n      </div>\n    </div>\n  </div>\n\n  \x3c!--Collections Area--\x3e\n  <div id="collections-area" class="w-100 h-85 mt-3 d-flex-block flex-wrap box">\n    <div\n      class="{{ \'grid-size-\' + gridSize }}"\n      *ngFor="let collection of (_collectionData | filterCollections: _searchText)"\n      (click)="accessOrDelete(collection)"\n      data-toggle="modal"\n      [attr.data-target]="_modalDeleteConfirmation"\n    >\n      \x3c!--Placeholder Area--\x3e\n      <div [ngSwitch]="_toggleView" class="w-99 box position-relative">\n        <div *ngSwitchDefault id="placeholder2d" class="w-99 box position-relative">\n          <img class="w-100 thumbnail hover-shadow" src="{{ collection.placeholder[0].data }}" />\n        </div>\n        <div\n          *ngSwitchCase="1"\n          id="placeholder3d"\n          class="w-99 box position-relative h-min-250px d-flex justify-content-center"\n        >\n          <img\n            *ngFor="let placeholder of collection.placeholder.slice(0, 5); let i = index"\n            src="{{ placeholder.data }}"\n            class="w-max-200px thumbnail layer-stack  layer-{{ i }} "\n          />\n        </div>\n      </div>\n\n      \x3c!--Collection\'s Name Area--\x3e\n      <div\n        id="collection-name"\n        class="w-99 d-flex align-items-center justify-content-center text-center box break-word text-overflow-ellipsis"\n      >\n        {{ collection.name }}\n      </div>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Modal add Collection --\x3e\n<div\n  class="modal fade roboto-font"\n  id="addCollectionModal"\n  tabindex="-1"\n  role="dialog"\n  aria-labelledby="addCollection"\n  aria-hidden="true"\n>\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="addCollection">Create a new Collection?</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body">\n        <form [formGroup]="_addNewCollectionForm">\n          <div class="form-group">\n            <input type="text" class="form-control d-none" formControlName="collectionName" />\n            <label for="Name" class="col-form-label">Name:</label>\n            <input type="text" class="form-control" id="Name" formControlName="collectionName" />\n            <label class="" for="collectionType">Type</label>\n            <select class="custom-select" id="collectionType" formControlName="collectionType">\n              <option selected disabled>Choose...</option>\n              <option value="0">Public</option>\n              <option value="1">Private</option>\n            </select>\n            <label for="Keywords" class="col-form-label">Keywords:</label>\n            <input type="text" class="form-control" id="keywords" formControlName="keywords" />\n          </div>\n        </form>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-{{ bootstrapAccentSecondary }}" data-dismiss="modal">\n          Close\n        </button>\n        <button\n          type="button"\n          class="btn btn-{{ bootstrapAccentPrimary }}"\n          data-dismiss="modal"\n          (click)="addCollection()"\n        >\n          Save changes\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Modal see Suggestions --\x3e\n<div\n  class="modal fade roboto-font"\n  id="seeSuggestionsModal"\n  tabindex="-1"\n  role="dialog"\n  aria-labelledby="seeSuggestions"\n  aria-hidden="true"\n>\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="seeSuggestions">Suggestions</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body d-flex-block flex-wrap box">\n        <div\n          class="{{ \'grid-size-\' + gridSizeSuggestions }}"\n          *ngFor="let collection of _suggestedCollectionData"\n          (click)="accessRecommendedCollection(collection)"\n          data-dismiss="modal"\n        >\n          \x3c!--Placeholder Area--\x3e\n          <div class="w-99 box position-relative">\n            <div id="placeholder2d" class="w-99 box position-relative">\n              <img\n                class="w-100 thumbnail hover-shadow"\n                src="{{ collection.placeholder[0].data }}"\n              />\n            </div>\n          </div>\n          \x3c!--Collection\'s Name Area--\x3e\n          <div\n            id="collection-name"\n            class="w-99 d-flex align-items-center justify-content-center text-center box break-word text-overflow-ellipsis"\n          >\n            {{ collection.name }}\n          </div>\n        </div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-{{ bootstrapAccentSecondary }}" data-dismiss="modal">\n          Close\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Delete Confirmation Modal --\x3e\n<div\n  class="modal fade roboto-font"\n  id="deleteConfirmationModal"\n  tabindex="-1"\n  role="dialog"\n  aria-labelledby="deleteConfirmation"\n  aria-hidden="true"\n>\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4 class="modal-title" id="deleteConfirmation">Confirm Delete</h4>\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n      </div>\n\n      <div class="modal-body">\n        <p>Are you sure you want to delete the collection, this procedure is irreversible.</p>\n        <p>Do you want to proceed?</p>\n      </div>\n\n      <div class="modal-footer">\n        <button type="button" class="btn btn-{{ bootstrapAccentSecondary }}" data-dismiss="modal">\n          Cancel\n        </button>\n        <button\n          class="btn btn-{{ bootstrapAccentPrimary }}"\n          (click)="deleteCollection()"\n          data-dismiss="modal"\n        >\n          Delete\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\x3c!-- Microphone Button --\x3e\n<div id="floatingMicrophone" class="notRecording">\n  <img class="w-50" src="../../../assets/microphoneIcon.png" />\n</div>\n',styles:['.switch{position:relative;display:inline-block;width:60px;height:34px;margin:0}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s}.switch>input:checked+.slider{background-color:#2196f3}.switch>input:focus+.slider{box-shadow:0 0 1px #2196f3}.switch>input:checked+.slider:before{-webkit-transform:translateX(26px);transform:translateX(26px)}.slider.round{border-radius:34px}.slider.round:before{border-radius:50%}']}]}],e.ctorParameters=function(){return[{type:v},{type:s.FormBuilder},{type:d.SpeechService},{type:w},{type:a.Router},{type:S}]},e.propDecorators={gridSize:[{type:f.Input}],gridSizeSuggestions:[{type:f.Input}],userId:[{type:f.Input}],collectionUrl:[{type:f.Input}],suggestedCollectionUrl:[{type:f.Input}],deleteCollectionUrl:[{type:f.Input}],addCollectionUrl:[{type:f.Input}],skip:[{type:f.Input}],take:[{type:f.Input}],albumUrl:[{type:f.Input}],suggestedEntityUrl:[{type:f.Input}],deleteEntityUrl:[{type:f.Input}],addEntitiesUrl:[{type:f.Input}],getEntityUrl:[{type:f.Input}],slideShow:[{type:f.Input}],lockSlideShow:[{type:f.Input}],slideShowTimeBeforeNext:[{type:f.Input}],configPath:[{type:f.Input}],bootstrapAccentPrimary:[{type:f.Input}],bootstrapAccentSecondary:[{type:f.Input}],onWindowScroll:[{type:f.HostListener,args:["window:scroll"]}]},e}(),E=function(){function e(e,t,n,o,i,s){this.api=e,this.speech=t,this.snake=n,this.router=o,this.route=i,this.floatingMicrophone=s,this._loadedFirstTime=!1,this._noMoreData=!1,this._modalDeleteConfirmation="",this._slideIndex=1,this._showSuggestedEntityModal=0,this._suggestedSlideIndex=1,this._destroyed=new c.Subject,this._upload=!1,this._cancel=!1}return e.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe(function(e){t.collectionId=e.id}),this.loadInputOptions(),this.speechActions(),this.floatingMicrophone.makeFloatingMicrophone(this.speech),this.lockSlideShow,this.slideShow?this._showEntityModal=1:this._showEntityModal=0},e.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete()},e.prototype.speechActions=function(){var t=this;this.speech.message.pipe(p.catchError(function(e){return t.toggleMic(),c.EMPTY}),p.takeUntil(this._destroyed)).subscribe(function(e){console.log(e),"delete"==e.message&&document.getElementById("deleteEntityButton").click(),"add"==e.message&&document.getElementById("addEntityButton").click(),"suggestions"!=e.message&&"tip"!=e.message&&"recommendations"!=e.message||document.getElementById("suggestionsEntityButton").click(),"snake"==e.message&&t.snake.snake(),t.toggleMic()})},e.prototype.toggleMic=function(){var e=document.getElementById("floatingMicrophone");e.classList.contains("notRecording")?(e.classList.remove("notRecording"),e.classList.add("recording"),this.speech.start()):(e.classList.remove("recording"),e.classList.add("notRecording"),this.speech.stop())},e.prototype.getAlbum=function(){var n=this;this.api.getData(this.albumUrl.replace("/$collectionId","/"+this.collectionId).replace("/$take","/"+this.take).replace("/$skip","/"+this.skip)).pipe(p.take(1)).subscribe(function(e){if("undefined"==typeof n._albumData&&(n._albumData=[]),0!=e.placeholder.length){console.log(n._albumData),n._albumData=b(n._albumData,e.placeholder),n.skip+=n.take;var t="";n._albumData.forEach(function(e){t+=","+e.keywords}),n._mostUsedKeywords=n.mostUsedKeywords(t),console.log(typeof n.suggestedEntityUrl),"undefined"!=typeof n.suggestedEntityUrl&&(console.log(typeof n.suggestedEntityUrl),n.getSuggestedEntities()),n._loadedFirstTime=!0}else n._noMoreData=!0})},e.prototype.mostUsedKeywords=function(e){for(var t={},n=e.split(","),o=0;o<n.length;o++)t["_"+n[o]]=(t["_"+n[o]]||0)+1;delete t._;var i="";for(var s in t=JSON.parse(JSON.stringify(t).replace(/_/g,"")))i+=","+s;return i=(i=i.replace(",","")).replace(/,null/g,""),console.log(i),i},e.prototype.getSuggestedEntities=function(){var t=this;this.api.getData(this.suggestedEntityUrl.replace("/$collectionId","/"+this.collectionId).replace("/$take","/"+this.take).replace("/$skip","/0")+"/"+this._mostUsedKeywords).pipe(p.take(1)).subscribe(function(e){t._suggestedEntities=e,console.log(e)})},e.prototype.onWindowScroll=function(){var e=(document.documentElement.scrollTop||document.body.scrollTop)+document.documentElement.offsetHeight,t=document.documentElement.scrollHeight;if(console.log(e),console.log(t),"undefined"==typeof this._scrollAmount)this._scrollAmount=e;else{var n=document.getElementById("floatingMicrophone");n.style.top=parseFloat(n.style.top)+(e-this._scrollAmount)+"px",this._scrollAmount=e}e!=t&&Math.ceil(e)!=Math.ceil(t)&&Math.floor(e)!=Math.floor(t)&&Math.floor(e)!=Math.ceil(t)&&Math.ceil(e)!=Math.floor(t)||this._loadedFirstTime&&this.getAlbum()},e.prototype.accessOrDelete=function(e,t){this._deleteAccent==this.bootstrapAccentSecondary?(this._markedForDeletion=e,console.log(this._markedForDeletion),console.log(e)):(this._showEntityModal=1,this._slideIndex=t)},e.prototype.noEntityModal=function(e){console.log(e),this._showEntityModal=e},e.prototype.accessSuggested=function(e){this._showSuggestedEntityModal=1,this._suggestedSlideIndex=e},e.prototype.noSuggestedEntityModal=function(e){console.log(e),this._showSuggestedEntityModal=e},e.prototype.deleteEntity=function(){var t=this;this.api.deleteData(this.deleteEntityUrl.replace("/$entityId","/"+this._markedForDeletion.id)).pipe(p.take(1)).subscribe(function(e){}),this._albumData=this._albumData.filter(function(e){return e!=t._markedForDeletion})},e.prototype.loadEntitiesUntilScrollbarAppears=function(){var e=this;this.getAlbum();var t=document.documentElement.scrollHeight,n=setInterval(function(){1==e._loadedFirstTime&&(t<document.documentElement.scrollHeight||1==e._noMoreData?clearInterval(n):e.getAlbum())},1e3)},e.prototype.loadMore=function(e){this.getAlbum()},e.prototype.addNewData=function(e){console.log(this._albumData),this._albumData=b(this._albumData,e),console.log(this._albumData),this._upload=!1},e.prototype.upload=function(){this._upload=!0},e.prototype.cancel=function(){this._cancel=!0},e.prototype.discardedData=function(e){this._cancel=e},e.prototype.toggleDeleteButton=function(){this._deleteAccent==this.bootstrapAccentPrimary?(this._deleteAccent=this.bootstrapAccentSecondary,this._modalDeleteConfirmation="#deleteConfirmationModal"):(this._deleteAccent=this.bootstrapAccentPrimary,this._modalDeleteConfirmation="")},e.prototype.loadInputOptions=function(){if(void 0===sessionStorage.getItem("albumInputs")){var e=JSON.parse(sessionStorage.getItem("albumInputs"));this.gridSize=e.gridSize,this.gridSizeSuggestions=e.gridSizeSuggestions,this.skip=e.skip,this.take=e.take,this.albumUrl=e.albumUrl,this.suggestedEntityUrl=e.suggestedEntityUrl,this.deleteEntityUrl=e.deleteEntityUrl,this.addEntitiesUrl=e.addEntitiesUrl,this.getEntityUrl=e.getEntityUrl,this.lockSlideShow=e.lockSlideShow,this.slideShow=e.slideShow,this.slideShowTimeBeforeNext=e.slideShowTimeBeforeNext,this.bootstrapAccentPrimary=e.bootstrapAccentPrimary,this.bootstrapAccentSecondary=e.bootstrapAccentSecondary,this._deleteAccent=this.bootstrapAccentPrimary,"undefined"!=typeof this.albumUrl&&(this.loadEntitiesUntilScrollbarAppears(),this.onWindowScroll())}else setTimeout(this.loadInputOptions,2e3)},e.decorators=[{type:f.Component,args:[{selector:"app-multimedia-album",template:'<div id="multimedia-album" class="w-100 h-100 p-2 box roboto-font">\n  \x3c!--Button Area--\x3e\n  <div id="button-area" class="w-100 d-flex-block justify-content-between box">\n    <div class="w-resizable-35 d-flex justify-content-between-start">\n      <button\n        type="button"\n        id="addEntityButton"\n        class="btn btn-{{ bootstrapAccentPrimary }} w-min-140px"\n        data-toggle="modal"\n        data-target="#addCollectionModal"\n      >\n        Add\n      </button>\n      <button\n        type="button"\n        id="deleteEntityButton"\n        class="btn btn-{{ _deleteAccent }} w-min-140px"\n        (click)="toggleDeleteButton()"\n      >\n        Delete\n      </button>\n    </div>\n\n    <div class="w-resizable-20 d-flex justify-content-between-end box">\n      \x3c!-- Suggestions Button --\x3e\n      <div class="w-80px d-flex flex-nowrap">\n        <button\n          type="button"\n          id="suggestionsEntityButton"\n          class="btn btn-{{ bootstrapAccentPrimary }} w-80px"\n          data-toggle="modal"\n          data-target="#seeSuggestionsModal"\n        >\n          Tip\n        </button>\n      </div>\n      \x3c!-- Filter Box --\x3e\n      <div class="w-min-140px w-max-140px box">\n        <input class="form-control" type="text" placeholder="Search.." [(ngModel)]="_searchText" />\n      </div>\n    </div>\n  </div>\n\n  \x3c!--Album Area--\x3e\n  <div id="album-area" class="w-100 h-85 mt-3 d-flex-block flex-wrap box">\n    <div\n      class="{{ \'grid-size-\' + gridSize }}"\n      *ngFor="let entity of (_albumData | filterAlbum: _searchText); let i = index"\n      data-toggle="modal"\n      [attr.data-target]="_modalDeleteConfirmation"\n      (click)="accessOrDelete(entity, i)"\n    >\n      \x3c!--Placeholder Area--\x3e\n      <div class="w-99 box position-relative">\n        <div id="placeholder2d" class="w-99 box position-relative">\n          <img class="w-100 thumbnail hover-shadow" src="{{ entity.data }}" />\n        </div>\n      </div>\n\n      \x3c!--Entity\'s Name Area--\x3e\n      <div\n        id="entity-name"\n        class="w-99 d-flex align-items-center justify-content-center text-center box break-word text-overflow-ellipsis"\n      >\n        {{ entity.name }}\n      </div>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Modal Upload Files and Urls --\x3e\n<div\n  class="modal fade roboto-font"\n  id="addCollectionModal"\n  tabindex="-1"\n  role="dialog"\n  aria-labelledby="addCollection"\n  aria-hidden="true"\n>\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="addCollection">Upload</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body">\n        <app-upload\n          class="w-100 h-100"\n          [upload]="_upload"\n          [cancel]="_cancel"\n          [collectionId]="collectionId"\n          [addEntitiesUrl]="addEntitiesUrl"\n          [bootstrapAccentSecondary]="bootstrapAccentSecondary"\n          (newData)="addNewData($event)"\n          (discarded)="discardedData($event)"\n        ></app-upload>\n      </div>\n      <div class="modal-footer">\n        <button\n          type="button"\n          class="btn btn-{{ bootstrapAccentSecondary }}"\n          data-dismiss="modal"\n          (click)="cancel()"\n        >\n          Close\n        </button>\n        <button\n          type="button"\n          class="btn btn-{{ bootstrapAccentPrimary }}"\n          data-dismiss="modal"\n          (click)="upload()"\n        >\n          Save changes\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Modal see Suggestions --\x3e\n<div\n  class="modal fade roboto-font"\n  id="seeSuggestionsModal"\n  tabindex="-1"\n  role="dialog"\n  aria-labelledby="seeSuggestions"\n  aria-hidden="true"\n>\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="seeSuggestions">Suggestions</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="false">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body d-flex-block flex-wrap box ">\n        <div\n          class="{{ \'grid-size-\' + gridSizeSuggestions }} "\n          *ngFor="let entity of _suggestedEntities; let i = index"\n          (click)="accessSuggested(i)"\n        >\n          \x3c!--Placeholder Area--\x3e\n          <div class="w-99 box position-relative ">\n            <div id="placeholder2d" class="w-99 box position-relative">\n              <img class="w-100 thumbnail hover-shadow" src="{{ entity.data }}" />\n            </div>\n          </div>\n          \x3c!--Entity\'s Name Area--\x3e\n          <div\n            id="entity-name"\n            class="w-99 d-flex align-items-center justify-content-center text-center box break-word text-overflow-ellipsis"\n          >\n            {{ entity.name }}\n          </div>\n        </div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-{{ bootstrapAccentSecondary }}" data-dismiss="modal">\n          Close\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Delete Confirmation Modal --\x3e\n<div\n  class="modal fade roboto-font"\n  id="deleteConfirmationModal"\n  tabindex="-1"\n  role="dialog"\n  aria-labelledby="deleteConfirmation"\n  aria-hidden="true"\n>\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4 class="modal-title" id="deleteConfirmation">Confirm Delete</h4>\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n      </div>\n\n      <div class="modal-body">\n        <p>Are you sure you want to delete the collection, this procedure is irreversible.</p>\n        <p>Do you want to proceed?</p>\n      </div>\n\n      <div class="modal-footer">\n        <button type="button" class="btn btn-{{ bootstrapAccentSecondary }}" data-dismiss="modal">\n          Cancel\n        </button>\n        <button\n          class="btn btn-{{ bootstrapAccentPrimary }}"\n          (click)="deleteEntity()"\n          data-dismiss="modal"\n        >\n          Delete\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Microphone Button --\x3e\n<div id="floatingMicrophone" class="notRecording">\n  <img class="w-50" src="../../../assets/microphoneIcon.png" />\n</div>\n\n\x3c!-- Modal for displaying multimedia files --\x3e\n<app-lightbox\n  (noShow)="noEntityModal($event)"\n  (loadMore)="loadMore($event)"\n  [show]="_showEntityModal"\n  [data]="_albumData | filterAlbum: _searchText"\n  [entityUrl]="getEntityUrl"\n  type="entity"\n  [index]="_slideIndex"\n  [noMoreData]="_noMoreData"\n  [lockSlideShow]="lockSlideShow"\n  [slideShow]="slideShow"\n  [slideShowTimeBeforeNext]="slideShowTimeBeforeNext"\n></app-lightbox>\n\n\x3c!-- Modal for displaying suggested multimedia files --\x3e\n<app-lightbox\n  (noShow)="noSuggestedEntityModal($event)"\n  [show]="_showSuggestedEntityModal"\n  [data]="_suggestedEntities"\n  [entityUrl]="getEntityUrl"\n  type="suggestedEntity"\n  [index]="_suggestedSlideIndex"\n  noMoreData="1"\n  lockSlideShow="false"\n  slideShow="false"\n  slideShowTimeBeforeNext="5000"\n></app-lightbox>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:v},{type:d.SpeechService},{type:w},{type:a.Router},{type:a.ActivatedRoute},{type:S}]},e.propDecorators={onWindowScroll:[{type:f.HostListener,args:["window:scroll"]}]},e}(),k=[{path:"",component:x},{path:":id",component:E},{path:"**",redirectTo:""}],I=function(){function e(){}return e.decorators=[{type:f.NgModule,args:[{imports:[a.RouterModule.forRoot(k)],exports:[a.RouterModule]}]}],e}(),U=function(){function e(){}return e.prototype.transform=function(e,n){return e?n?(n=n.toLowerCase(),e.filter(function(e){var t=e.type;return t=0==t?"public":"private",e.name.toLowerCase().includes(n)||e.keywords.split(",").some(function(e){return e.toLowerCase().includes(n)})||t.includes(n)})):e:[]},e.decorators=[{type:f.Pipe,args:[{name:"filterCollections"}]}],e}(),A=function(){function e(e){this.api=e}return e.prototype.ngOnInit=function(){this.getEntity(this.sourceUrl.replace("/$entityId","/"+this.entityId))},e.prototype.getEntity=function(e){var t=this;this.api.getData(e).subscribe(function(e){t.source=e.data,t.extension=e.extension})},e.decorators=[{type:f.Component,args:[{selector:"app-album-loader",template:'<div [ngSwitch]="extension" class="wh-100 ">\n  <div *ngSwitchCase="\'audio\'" class="wh-100">\n    <app-audio-module source="{{ source }}" class="wh-100"> </app-audio-module>\n  </div>\n  <div *ngSwitchCase="\'video\'" class="wh-100">\n    <app-video-module source="{{ source }}" class="wh-100"> </app-video-module>\n  </div>\n  <div *ngSwitchCase="\'image\'" class="wh-100">\n    <app-image-module source="{{ source }}" class="wh-100"> </app-image-module>\n  </div>\n  <div *ngSwitchCase="\'pdf\'" class="wh-100">\n    <app-pdf-module source="{{ source }}" class="wh-100"> </app-pdf-module>\n  </div>\n  <div *ngSwitchCase="\'svg\'" class="wh-100 ">\n    <app-svg-module source="{{ source }}" class="wh-100 "> </app-svg-module>\n  </div>\n  <div *ngSwitchCase="\'youtube\'" class="wh-100 h-90">\n    <app-youtube-module source="{{ source }}" class="wh-100 "> </app-youtube-module>\n  </div>\n</div>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:v}]},e.propDecorators={sourceUrl:[{type:f.Input}],entityId:[{type:f.Input}]},e}(),C=function(){function e(){this.noShow=new f.EventEmitter,this.loadMore=new f.EventEmitter,this.ready=0,this.startSlideShow=!1}return e.prototype.ngOnInit=function(){"string"==typeof this.slideShow&&(this.slideShow="true"==this.slideShow),"string"==typeof this.lockSlideShow&&(this.lockSlideShow="true"==this.lockSlideShow)},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.ready=1},1e3)},e.prototype.ngOnChanges=function(e){this.start()},e.prototype.start=function(){var e=this;1==this.ready?1==this.show&&(this.slideIndex=this.index,this.openEntityModal(),this.currentSlide(this.slideIndex+1),console.log(this.slideShow),1==this.slideShow&&0==this.startSlideShow&&(this.startSlideShow=!0,setInterval(function(){e.plusSlides(1),console.log("here")},this.slideShowTimeBeforeNext))):setTimeout(this.start,1e3)},e.prototype.openEntityModal=function(){document.getElementById(this.type+"Modal").style.display="block"},e.prototype.closeEntityModal=function(){console.log(typeof this.lockSlideShow),0==this.lockSlideShow&&(document.getElementById(this.type+"Modal").style.display="none",this.noShow.emit(0))},e.prototype.plusSlides=function(e){this.showSlides(this.slideIndex+=e)},e.prototype.currentSlide=function(e){this.showSlides(this.slideIndex=e)},e.prototype.showSlides=function(e){var t,n=document.getElementsByClassName("my"+this.type+"Slides");for(e>n.length&&(this.noMoreData?this.slideIndex=1:(this.loadMore.emit(!0),this.slideIndex=this.slideIndex-1)),console.log(n),e<1&&(this.slideIndex=n.length),t=0;t<n.length;t++)n[t].style.display="none";n[this.slideIndex-1].style.display="block"},e.decorators=[{type:f.Component,args:[{selector:"app-lightbox",template:'\x3c!-- Modal for displaying multimedia files --\x3e\n<div\n  id="{{ type + \'Modal\' }}"\n  class="modalEntity  roboto-font"\n  (swipeleft)="plusSlides(-1)"\n  (swiperight)="plusSlides(1)"\n>\n  <span class="close cursor " (click)="closeEntityModal()">&times;</span>\n  <div class="modalEntity-content  d-flex justify-content-center align-items-center">\n    <div class="{{ \'my\' + type + \'Slides\' + \' wh-98\' }}" *ngFor="let entity of data; let i = index">\n      <app-album-loader\n        *ngIf="slideIndex == i + 1"\n        sourceUrl="{{ entityUrl }}"\n        entityId="{{ entity.id }}"\n      ></app-album-loader>\n    </div>\n  </div>\n  <a class="prev" (click)="plusSlides(-1)">&#10094;</a>\n  <a class="next" (click)="plusSlides(1)">&#10095;</a>\n</div>\n',styles:[".modalEntity{display:none;position:fixed;z-index:100000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000}.modalEntity-content{position:relative;background-color:#000;margin:auto;padding:0;width:80%;height:100%}.close{color:#fff;position:absolute;top:10px;right:25px;font-size:35px;font-weight:700}.close:focus,.close:hover{color:#999;text-decoration:none;cursor:pointer}.mySlides{display:none}.cursor{cursor:pointer}.next,.prev{cursor:pointer;position:absolute;top:50%;width:auto;padding:16px;margin-top:-50px;color:#fff;font-weight:700;font-size:20px;transition:.6s;border-radius:0 3px 3px 0;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}.next{right:0;border-radius:3px 0 0 3px}.next:hover,.prev:hover{background-color:rgba(0,0,0,.8)}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={data:[{type:f.Input}],type:[{type:f.Input}],index:[{type:f.Input}],show:[{type:f.Input}],noMoreData:[{type:f.Input}],entityUrl:[{type:f.Input}],slideShow:[{type:f.Input}],lockSlideShow:[{type:f.Input}],slideShowTimeBeforeNext:[{type:f.Input}],noShow:[{type:f.Output}],loadMore:[{type:f.Output}]},e}(),D=function(){function e(){}return e.prototype.transform=function(e,t){return e?t?(t=t.toLowerCase(),e.filter(function(e){return e.name.toLowerCase().includes(t)||e.extension.toLowerCase().includes(t)||e.keywords.split(",").some(function(e){return e.toLowerCase().includes(t)})})):e:[]},e.decorators=[{type:f.Pipe,args:[{name:"filterAlbum"}]}],e}(),_=function(){function e(e){this.api=e}return e.prototype.ngOnInit=function(){},e.prototype.loadInputOptionsOrDefault=function(){var t=this;this.configPath="../../../assets/config.json","undefined"!=typeof this.configPath?this.api.getData(this.configPath).pipe(p.catchError(function(e){return t.loadDefault(),c.EMPTY}),p.take(1),p.map(function(e){return console.log("here"),e})).subscribe(function(e){"undefined"!=typeof e.gridSize&&"undefined"==typeof t.gridSize&&(t.gridSize=e.gridSize),"undefined"!=typeof e.gridSizeSuggestions&&"undefined"==typeof t.gridSizeSuggestions&&(t.gridSizeSuggestions=e.gridSizeSuggestions),"undefined"!=typeof e.skip&&"undefined"==typeof t.skip&&(t.skip=e.skip),"undefined"!=typeof e.take&&"undefined"==typeof t.take&&(t.take=e.take),"undefined"!=typeof e.bootstrapAccentPrimary&&"undefined"==typeof t.bootstrapAccentPrimary&&(t.bootstrapAccentPrimary=e.bootstrapAccentPrimary),"undefined"!=typeof e.bootstrapAccentSecondary&&"undefined"==typeof t.bootstrapAccentSecondary&&(t.bootstrapAccentSecondary=e.bootstrapAccentSecondary),"undefined"!=typeof e.albumUrl&&"undefined"==typeof t.albumUrl&&(t.albumUrl=e.albumUrl),"undefined"!=typeof e.suggestedEntityUrl&&"undefined"==typeof t.suggestedEntityUrl&&(t.suggestedEntityUrl=e.suggestedEntityUrl),"undefined"!=typeof e.deleteEntityUrl&&"undefined"==typeof t.deleteEntityUrl&&(t.deleteEntityUrl=e.deleteEntityUrl),"undefined"!=typeof e.addEntitiesUrl&&"undefined"==typeof t.addEntitiesUrl&&(t.addEntitiesUrl=e.addEntitiesUrl),"undefined"!=typeof e.getEntityUrl&&"undefined"==typeof t.getEntityUrl&&(t.getEntityUrl=e.getEntityUrl),"undefined"!=typeof e.slideShow&&"undefined"==typeof t.slideShow&&(t.slideShow=e.slideShow),"undefined"!=typeof e.lockSlideShow&&"undefined"==typeof t.lockSlideShow&&(t.lockSlideShow=e.lockSlideShow),"undefined"!=typeof e.slideShowTimeBeforeNext&&"undefined"==typeof t.slideShowTimeBeforeNext&&(t.slideShowTimeBeforeNext=e.slideShowTimeBeforeNext),t.loadDefault()}):this.loadDefault()},e.prototype.loadDefault=function(){"undefined"==typeof this.gridSize&&(this.gridSize=10),"undefined"==typeof this.gridSizeSuggestions&&(this.gridSizeSuggestions=3),"undefined"==typeof this.skip&&(this.skip=0),"undefined"==typeof this.take&&(this.take=10),"undefined"==typeof this.bootstrapAccentPrimary&&(this.bootstrapAccentPrimary="danger"),"undefined"==typeof this.bootstrapAccentSecondary&&(this.bootstrapAccentSecondary="dark"),"undefined"==typeof this.albumUrl&&(this.albumUrl=""),"undefined"==typeof this.suggestedEntityUrl&&(this.suggestedEntityUrl=""),"undefined"==typeof this.deleteEntityUrl&&(this.deleteEntityUrl=""),"undefined"==typeof this.addEntitiesUrl&&(this.addEntitiesUrl=""),"undefined"==typeof this.getEntityUrl&&(this.getEntityUrl=""),"undefined"==typeof this.slideShow&&(this.slideShow=!1),"undefined"==typeof this.lockSlideShow&&(this.lockSlideShow=!1),"undefined"==typeof this.slideShowTimeBeforeNext&&(this.slideShowTimeBeforeNext=5e3);var e={gridSize:this.gridSize,gridSizeSuggestions:this.gridSizeSuggestions,skip:this.skip,take:this.take,bootstrapAccentPrimary:this.bootstrapAccentPrimary,bootstrapAccentSecondary:this.bootstrapAccentSecondary,albumUrl:this.albumUrl,suggestedEntityUrl:this.suggestedEntityUrl,deleteEntityUrl:this.deleteEntityUrl,addEntitiesUrl:this.addEntitiesUrl,getEntityUrl:this.getEntityUrl,lockSlideShow:this.lockSlideShow,slideShow:this.slideShow,slideShowTimeBeforeNext:this.slideShowTimeBeforeNext};sessionStorage.setItem("albumInputs",JSON.stringify(e))},e.decorators=[{type:f.Component,args:[{selector:"app-stand-alone",template:'<app-multimedia-album class="w-100 h-100"> </app-multimedia-album>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:v}]},e.propDecorators={gridSize:[{type:f.Input}],gridSizeSuggestions:[{type:f.Input}],skip:[{type:f.Input}],take:[{type:f.Input}],albumUrl:[{type:f.Input}],suggestedEntityUrl:[{type:f.Input}],deleteEntityUrl:[{type:f.Input}],addEntitiesUrl:[{type:f.Input}],getEntityUrl:[{type:f.Input}],slideShow:[{type:f.Input}],lockSlideShow:[{type:f.Input}],slideShowTimeBeforeNext:[{type:f.Input}],configPath:[{type:f.Input}],bootstrapAccentPrimary:[{type:f.Input}],bootstrapAccentSecondary:[{type:f.Input}]},e}(),M=function(){function e(e){this.api=e,this.newData=new f.EventEmitter,this.discarded=new f.EventEmitter,this.$=u,this.imageFormats=["jpeg","jpg","png","webp","gif"],this.videoFormats=["webm","ogv","mp4"],this.audioFormats=["mp3","wave","ogg","oga"],this.bypassCors="http://cors-anywhere.herokuapp.com/",this.arrayOfEntityAndPlaceholder=[],this.urlInput="",this.urlInputClass=""}return e.prototype.ngOnInit=function(){this.makeUploadArea()},e.prototype.ngOnChanges=function(e){1==this.upload&&this.uploadFiles(),1==this.cancel&&this.uploadFiles()},e.prototype.ngAfterViewInit=function(){},e.prototype.discardFile=function(t){this.arrayOfEntityAndPlaceholder=this.arrayOfEntityAndPlaceholder.filter(function(e){return e!=t}),console.log(this.arrayOfEntityAndPlaceholder)},e.prototype.discardChanges=function(){this.arrayOfEntityAndPlaceholder=[],this.discarded.emit(0)},e.prototype.uploadFiles=function(){var t=this;console.log(this.addEntitiesUrl),console.log(this.arrayOfEntityAndPlaceholder);var n=[],o=0;this.arrayOfEntityAndPlaceholder.forEach(function(e){console.log(e.fileSize),e.fileSize<=21&&(o<=21&&o+e.fileSize<=21?n.push(e):(t.postData(n),o=0,(n=[]).push(e)),o+=e.fileSize)}),0<n.length&&this.postData(n),this.arrayOfEntityAndPlaceholder=[]},e.prototype.postData=function(n){var o=this;this.api.postData(this.addEntitiesUrl,n).pipe(p.take(1)).subscribe(function(e){for(var t=0;t<n.length;t++)n[t].entityFile=null,n[t].id=e[t].id;o.newData.emit(n)})},e.prototype.makeUploadArea=function(){var o=this;$("#uploadModal").on({"dragover dragenter":function(e){e.preventDefault(),e.stopPropagation()},drop:function(e,t){var n=e.originalEvent.dataTransfer;console.log(n),n&&n.files.length&&(console.log(n),e.preventDefault(),e.stopPropagation(),o.readUploadedFilesAndGetPlaceholders(n.files,o.collectionId))}})},e.prototype.uploadFilesFromButton=function(e){this.readUploadedFilesAndGetPlaceholders(e.target.files,this.collectionId)},e.prototype.readUploadedFilesAndGetPlaceholders=function(i,s){var l=this;console.log(i),Object.keys(i).forEach(function(e){console.log(i[e]),console.log(i[e].name);var n=i[e].name,o=i[e].size/1024e3,t=new FileReader;t.readAsDataURL(i[e]),t.onload=function(e){var t=e.target.result.split(";")[0];t.includes("image")&&t.includes("svg")&&l.imageData(e.target.result,200,200,"svg",n,0,s,o),t.includes("image")&&!t.includes("svg")&&l.imageData(e.target.result,200,200,"image",n,0,s,o),t.includes("audio")&&l.audioData(e.target.result,200,200,"audio",n,0,s,o),t.includes("video")&&l.videoData(e.target.result,200,200,"video",n,0,s,o),t.includes("pdf")&&l.pdfData(e.target.result,200,200,"pdf",n,0,s,o),console.log(l.arrayOfEntityAndPlaceholder)},t.onerror=function(e){return console.log(e)}})},e.prototype.scrapUrl=function(){this.getPlaceholderFromUrl(this.collectionId)},e.prototype.getPlaceholderFromUrl=function(e){var t=this.urlInput.split("?")[0],n=t.split("."),o=n[n.length-1],i="File From Url";void 0!==t&&(this.imageFormats.includes(o)||this.audioFormats.includes(o)||this.videoFormats.includes(o)||"pdf"==o||"svg"==o||t.includes("youtube"))?("svg"==o&&this.imageData(t,200,200,"svg",i,1,e,.05),this.imageFormats.includes(o)&&this.imageData(t,200,200,"image",i,1,e,.05),this.audioFormats.includes(o)&&this.audioData(t,200,200,"audio",i,1,e,.05),this.videoFormats.includes(o)&&this.videoData(t,200,200,"video",i,1,e,.05),"pdf"==o&&this.pdfData(t,200,200,"pdf",i,1,e,.05),t.includes("youtube")&&this.youtubeData(this.urlInput,200,200,"youtube",i,1,e,.05),this.urlInputClass=""):this.urlInputClass="text-danger",this.urlInput=""},e.prototype.generatePostObject=function(e,t,n,o,i,s,l){return{name:o.split(".")[0],data:t.toDataURL("image/jpeg",1),collectionId:s,extension:n,keywords:"",fileSize:l,entityFile:[{name:o,extension:n,isUrl:i,data:e}]}},e.prototype.imageData=function(t,n,o,i,s,l,a,r){var d=this,c=new Image;1==l?(c.crossOrigin="Anonymous",c.src=this.bypassCors+t):c.src=t,c.onload=function(){var e=document.createElement("canvas");e.width=n,e.height=o,e.getContext("2d").drawImage(c,0,0,n,o),d.arrayOfEntityAndPlaceholder.push(d.generatePostObject(t,e,i,s,l,a,r)),console.log(d.arrayOfEntityAndPlaceholder)}},e.prototype.audioData=function(t,n,o,i,s,l,a,r){var d=this,c=new Image;c.src="../../../assets/music-icon.jpg",c.onload=function(){var e=document.createElement("canvas");e.width=n,e.height=o,e.getContext("2d").drawImage(c,0,0,n,o),d.arrayOfEntityAndPlaceholder.push(d.generatePostObject(t,e,i,s,l,a,r))}},e.prototype.pdfData=function(i,s,l,a,r,d,c,u){var e,p=this;e=1==d?this.bypassCors+i:i,h.getDocument(e).then(function(e){e.getPage(1).then(function(e){var t=document.createElement("canvas"),n=e.getViewport(1),o=t.getContext("2d");t.height=l,t.width=s,e.render({canvasContext:o,viewport:n}).then(function(){p.arrayOfEntityAndPlaceholder.push(p.generatePostObject(i,t,a,r,d,c,u))})})})},e.prototype.videoData=function(n,o,i,s,l,a,r,d){var c=this,u=document.createElement("video");1==a?(u.crossOrigin="Anonymous",u.src=this.bypassCors+n):u.src=n,u.onloadeddata=function(e){var t=document.createElement("canvas");t.width=o,t.height=i,t.getContext("2d").drawImage(u,0,0,o,i),c.arrayOfEntityAndPlaceholder.push(c.generatePostObject(n,t,s,l,a,r,d))}},e.prototype.youtubeData=function(t,n,o,i,s,l,a,r){var d=this,e="https://img.youtube.com/vi/"+t.split("/watch?v=")[1]+"/0.jpg",c=new Image;c.crossOrigin="Anonymous",c.src=this.bypassCors+e,c.onload=function(){var e=document.createElement("canvas");e.width=n,e.height=o,e.getContext("2d").drawImage(c,0,0,n,o),d.arrayOfEntityAndPlaceholder.push(d.generatePostObject(t,e,i,s,l,a,r))}},e.decorators=[{type:f.Component,args:[{selector:"app-upload",template:'<div id="uploadModal" class="w-100 h-100 h-min-300px roboto-font">\n  <div class="d-flex flex-wrap align-items-center justify-content-between">\n    <div class="d-flex  flex-nowrap w-resizable-70 mb-1">\n      <input\n        type="text"\n        [(ngModel)]="urlInput"\n        class="form-control mr-1 {{ urlInputClass }}"\n        data-toggle="tooltip"\n        title="The url must end with a known file extension"\n      />\n      <button class="btn btn-{{ bootstrapAccentSecondary }} w-min-100px" (click)="scrapUrl()">\n        Insert Url\n      </button>\n    </div>\n    <div class="d-flex  flex-nowrap justify-content-end w-resizable-30 mb-1">\n      <input hidden type="file" #uploader (change)="uploadFilesFromButton($event)" multiple />\n      <button class="btn btn-{{ bootstrapAccentSecondary }}" (click)="uploader.click()">\n        Select Files\n      </button>\n    </div>\n  </div>\n  <div\n    *ngFor="let entity of arrayOfEntityAndPlaceholder; let i = index"\n    class="d-flex flex-nowrap  align-items-center w-100 mb-2"\n  >\n    <div class="d-flex flex-wrap  align-items-center mr-1">\n      <input\n        [(ngModel)]="arrayOfEntityAndPlaceholder[i].name"\n        placeholder="Name"\n        class="{{ entity.fileSize > 21 ? \'text-danger\' : \'\' }} form-control"\n      />\n      <input\n        [(ngModel)]="arrayOfEntityAndPlaceholder[i].keywords"\n        placeholder="Keyword1,Keyword2,Keyword3"\n        class="{{ entity.fileSize > 21 ? \'text-danger\' : \'\' }} form-control"\n      />\n    </div>\n    <div class="d-flex  flex-nowrap justify-content-end w-min-100px ">\n      <button class="btn btn-danger" (click)="discardFile(entity)">\n        Discard File\n      </button>\n    </div>\n  </div>\n</div>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:v}]},e.propDecorators={upload:[{type:f.Input}],cancel:[{type:f.Input}],collectionId:[{type:f.Input}],addEntitiesUrl:[{type:f.Input}],bootstrapAccentSecondary:[{type:f.Input}],newData:[{type:f.Output}],discarded:[{type:f.Output}]},e}(),P=function(){function e(e){this.sanitizer=e}return e.prototype.ngOnInit=function(){},e.decorators=[{type:f.Component,args:[{selector:"app-audio-module",template:'<audio style="height:100%;width:100%;border: 0px;" controls>\n  <source [src]="sanitizer.bypassSecurityTrustResourceUrl(source)" />\n</audio>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:g.DomSanitizer}]},e.propDecorators={source:[{type:f.Input}]},e}(),F=function(){function e(e){this.sanitizer=e}return e.prototype.ngOnInit=function(){},e.decorators=[{type:f.Component,args:[{selector:"app-image-module",template:'<img\n  [src]="sanitizer.bypassSecurityTrustResourceUrl(source)"\n  style="height:100%;width:100%;border: 0px;"\n/>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:g.DomSanitizer}]},e.propDecorators={source:[{type:f.Input}]},e}(),T=function(){function e(e){this.sanitizer=e}return e.prototype.ngOnInit=function(){},e.decorators=[{type:f.Component,args:[{selector:"app-video-module",template:'<video style="height:100%;width:100%;border: 0px;" controls>\n  <source [src]="sanitizer.bypassSecurityTrustResourceUrl(source)" />\n</video>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:g.DomSanitizer}]},e.propDecorators={source:[{type:f.Input}]},e}(),O=function(){function e(){}return e.decorators=[{type:f.NgModule,args:[{declarations:[y,E,x,A,F,T,P,U,D,_,C,M],imports:[g.BrowserModule,I,s.FormsModule,s.ReactiveFormsModule,l.HttpClientModule,d.SpeechModule,n.PdfModuleModule,o.SvgModuleModule,i.YoutubeModuleModule],providers:[{provide:t.APP_BASE_HREF,useValue:"/"},{provide:"SPEECH_LANG",useValue:"en-US"}],exports:[x,_]}]}],e}();e.NgxMultiMediaAlbumManagementComponent=y,e.NgxMultiMediaAlbumManagementModule=O,e.o=I,e.e=x,e.j=U,e.f=A,e.m=C,e.a=E,e.k=D,e.l=_,e.n=M,e.b=v,e.c=w,e.i=P,e.g=F,e.h=T,e.d=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-multi-media-album-management.umd.min.js.map